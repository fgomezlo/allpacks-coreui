
<div  
class="bg-light min-vh-100 d-flex flex-row align-items-center">
    <c-container >
      <c-row class="justify-content-center">
        <c-col *ngIf="tokendisabled == null" md="8">
          <c-card-group>
            <c-card class="p-4">
              <form 
              cForm 
              [formGroup]="simpleForm" 
              novalidate 
              >
              <c-card-body>
                  <h1>Reestablecer Contraseña</h1>
                  <p class="text-medium-emphasis">{{ currentuser.name }}</p>
                  <c-input-group class="mb-4">
                    <span cInputGroupText>
                      <svg cIcon name="cilLockLocked"></svg>
                    </span>
                    <input
                      formControlName="clave"
                      cFormControl
                      placeholder="Clave"
                      type="password"
                      [valid]="
                      clave.touched && clave.valid ? true
                      : (submitted || clave.touched) && clave.invalid
                      ? false : undefined"
                    />
                    <c-form-feedback *ngIf="submitted || clave.invalid" [valid]="!(submitted || clave.invalid)">
                      <ng-container *ngIf="clave.errors as errors">
                        <p *ngIf="errors['required']">Clave no puede estar vacío</p>
                      </ng-container>
                    </c-form-feedback>
                  </c-input-group>
                  <c-input-group class="mb-4">
                    <span cInputGroupText>
                      <svg cIcon name="cilLockLocked"></svg>
                    </span>
                    <input
                      formControlName="claveConfirmar"
                      cFormControl
                      placeholder="Confirmar Clave"
                      type="password"
                      [valid]="
                      claveconfirmar.touched && claveconfirmar.valid ? true
                      : (submitted || claveconfirmar.touched) && claveconfirmar.invalid
                      ? false : undefined"
                    />
                    <c-form-feedback *ngIf="submitted || claveconfirmar.invalid" [valid]="!(submitted || claveconfirmar.invalid)">
                      <ng-container *ngIf="claveconfirmar.errors as errors">
                        <p *ngIf="errors['required']">La clave no puede ser vacia</p>
                        <p *ngIf="errors['missmatchclave']">Las claves son diferentes</p>
                      </ng-container>
                    </c-form-feedback>
                  </c-input-group>
                  <c-row>
                    <c-col md="12" xs="12" class="d-flex justify-content-center">
                      
                      <re-captcha (resolved)="recaptchaRestore($event)" ></re-captcha>
                      <!-- div *ngIf="recaptcha.invalid && (recaptcha.dirty || recaptcha.touched)" class="invalid-feedback">
                        <div *ngIf="recaptcha.errors?.['required']">This field is required.</div>
                      </div -->
                    </c-col>
                    <c-col md="12" xs="12" class="text-center">
                      <input 
                      formControlName="recaptcha" 
                      cFormControl
                      type="hidden"
                      [valid]="false" 
                      />
                      <c-form-feedback [valid]="!(submitted && recaptcha.invalid)">
                        <ng-container *ngIf="recaptcha.errors as errors">
                          <p *ngIf="errors['required']">Debes validar que no eres un robot</p>
                        </ng-container>
                      </c-form-feedback>
                    </c-col>
                  </c-row>
                  <c-row class="mt-3">
                    <c-col xs="12" class="d-flex justify-content-center">
                      <button 
                      (click)="onSubmit()"
                      [disabled]="!simpleForm.valid"
                      cButton  
                      color="primary">
                        Asignar nueva clave
                      </button>
                    </c-col>
                  </c-row>
              </c-card-body>
              </form>
            </c-card>
            <c-card >
              <c-card-body class="text-center d-flex align-items-center">
                <img cImg 
                fluid
                align="center" 
                src="assets/images/logo_allpacks.png">
              </c-card-body>
            </c-card>
          </c-card-group>
        </c-col>
        <c-col *ngIf="tokendisabled != null" md="8">
            <img cImg fluid align="center" src="assets/images/logo_allpacks.png">
            <h1 class="text-danger text-center">{{tokendisabled}}</h1>
            <div class="d-flex justify-content-center">
                <a [routerLink]="['/login']" 
            cButton
            color="primary"
            >
             Ir a inicio
         </a>
            </div>
            
        </c-col>
      </c-row>
    </c-container>
  </div>
